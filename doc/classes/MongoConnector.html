<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>MongoConnector - dataexp</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.8.0pr2/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <script src="http://yui.yahooapis.com/combo?3.8.0pr2/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            <h1><a href="../index.html"><img src="../assets/css/logo.png" width="117" height="52">dataexp: MongoConnector</a></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.1</em>
        </div>
    </div>
    <div class="yui3-g">

        <div id="sidebar" class="yui3-u">
            <div id="modules" class="sidebox">
                <div class="hd">
                    <h2 class="no-toc">Modules</h2>
                </div>
                <div class="bd">
                    <ul>
                            <li><a href="../modules/server.html">server</a>
                                <ul>
                                        <li><a href="../modules/server.html#Connectors">Connectors</a></li>
                                        <li><a href="../modules/server.html#RestApi">RestApi</a></li>
                                </ul>
                            </li>
                    </ul>
                </div>
            </div>
            
            <div id="classes" class="sidebox">
                <div class="hd">
                    <h2 class="no-toc">Classes</h2>
                </div>
                <div class="bd">
                    <ul>
                            <li><a href="../classes/FileConnector.html">FileConnector</a></li>
                            <li><a href="../classes/GetSources.html">GetSources</a></li>
                            <li><a href="../classes/GetTimseries.html">GetTimseries</a></li>
                            <li><a href="../classes/MongoConnector.html">MongoConnector</a></li>
                            <li><a href="../classes/MysqlConnector.html">MysqlConnector</a></li>
                            <li><a href="../classes/routes.html">routes</a></li>
                    </ul>
                </div>
            </div>
            
            <div id="methods-on-page" class="sidebox on-page">
                <div class="hd">
                    <h2 class="no-toc">Methods On Page</h2>
                </div>
                <div class="bd">
                    <ul>
                            <li><a href="#methods_getDataset">getDataset</a></li>
                            <li><a href="#methods_getFields">getFields</a></li>
                            <li><a href="#methods_getStoreNames">getStoreNames</a></li>
                            <li><a href="#methods_getStoreSize">getStoreSize</a></li>
                            <li><a href="#methods_isValidDatasetConfig">isValidDatasetConfig</a></li>
                            <li><a href="#methods_isValidSourceConfig">isValidSourceConfig</a></li>
                            <li><a href="#methods_isValidStoreConfig">isValidStoreConfig</a></li>
                    </ul>
                </div>
            </div>
            
            
            
            
            <div id="fileTree" class="sidebox">
                <div class="hd">
                    <h2 class="no-toc">Files</h2>
                </div>
                <div class="bd">
                    <ul><li>app/<ul><li>js/<ul><li><a href="../files/app_js_canvasjs.js.html">canvasjs.js</a></li><li>controllers/<ul><li><a href="../files/app_js_controllers_DialogCtrl.js.html">DialogCtrl.js</a></li><li><a href="../files/app_js_controllers_LeftNavCtrl.js.html">LeftNavCtrl.js</a></li></ul></li></ul></li></ul></li><li>server/<ul><li>connectors/<ul><li><a href="../files/server_connectors_FileConnector.js.html">FileConnector.js</a></li><li><a href="../files/server_connectors_MongoConnector.js.html">MongoConnector.js</a></li><li><a href="../files/server_connectors_MysqlConnector.js.html">MysqlConnector.js</a></li></ul></li><li>rest/<ul><li><a href="../files/server_rest_GetSources.js.html">GetSources.js</a></li><li><a href="../files/server_rest_GetTimeseries.js.html">GetTimeseries.js</a></li></ul></li><li><a href="../files/server_routes.js.html">routes.js</a></li></ul></li></ul>
                </div>
            </div>
            
        </div>

        <div id="main" class="yui3-u">
            <div class="content"><h4>Class MongoConnector</h4>
<span class="foundat">Class defined in: <a href="../files/server_connectors_MongoConnector.js.html#l9"><code>server&#x2F;connectors&#x2F;MongoConnector.js:9</code></a></span>
<div class="intro"><p>A connector to the MongoDB database</p>
</div>


<div id="classdocs">
    <ul>
        <li><a href="#methods">Methods</a></li>
    </ul>
    <div>
            <div id="methods">
<a name="methods_getDataset"></a>
<div class="method item">
    Array <strong class="name"><code>getDataset</code></strong>( <code>dataset_config, callback </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/server_connectors_MongoConnector.js.html#l369"><code>server&#x2F;connectors&#x2F;MongoConnector.js:369</code></a>
    </span><br>
    <p>A public method that takes in the fields configuration file
(<code>dataset_config</code>) and returns the requested dataset.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>dataset_config</code> <strong>&lt;Json&gt;</strong>
        <p>Dataset configuration</p>

        </li>
        <li>
            <code>callback</code> <strong>&lt;Function&gt;</strong>
        <p>Callback function</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;Array&gt; <p>A requested dataset</p>
</div>
        <h5>Example</h5>
        <pre class="code prettyprint"><code>var mongo_connector = require('../connectors/MongoConnector');

//the MongoDB database 'test_database' has the following collections:
//  - collection1
//  - collection2

//config file
var dataset_config = {
    fields: [
        {name: 'year', value: '2011', format: 'YYYY'}, //'value' and 'format' fields are optional
        {name: 'a', value: 18.11}
    ],
    store: {name: 'collection1', size: 3},  //presence of 'size' is optional
    source: {
            name: 'test_mongo',
            type: 'mongo',
            user: '',
            passw: '',
            server: 'localhost',
            port: null,
            db: 'test_database'
    } 
};

//requesting the dataset
mongo_connnector.getDataset(dataset_config, function(err, data){

        if (data) console.log(data);
        //the result is:
        //[
        //  { a: 18.11, year: '2011' },
        //  { a: 21.07, year: '2012' },
        //  { a: 23.23, year: '2013' },
        //  { a: 24.24, year: '2014' }
        //]
});
</code></pre>

</div>
<a name="methods_getFields"></a>
<div class="method item">
    Array <strong class="name"><code>getFields</code></strong>( <code>store_config, callback </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/server_connectors_MongoConnector.js.html#l227"><code>server&#x2F;connectors&#x2F;MongoConnector.js:227</code></a>
    </span><br>
    <p>A public method that returns
the field names present in each
document.<br/>
Fields are only checked in the
first document of store (mongo collection).<br/>
Also the value of each field is saved (cf exemple).<br/>
The mongodb '_id' field is ommited.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>store_config</code> <strong>&lt;Json&gt;</strong>
        <p>Store (mongo collection) configuration</p>

        </li>
        <li>
            <code>callback</code> <strong>&lt;Function&gt;</strong>
        <p>Callback function</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;Array&gt; <p>An array of fields configuration</p>
</div>
        <h5>Example</h5>
        <pre class="code prettyprint"><code>var mongo_connector = require('../connectors/MongoConnector');

//the MongoDB database 'test_database' has the following collections:
//  - collection1
//  - collection2

//config file
var store_config = {
    store: {name: 'collection1', size: 4}, //presence of 'size' is optional 
    source: {
            name: 'test_mongo',
            type: 'mongo',
            user: '',
            passw: '',
            server: 'localhost',
            port: null,
            db: 'test_database'
    } 
};

//requesting the fields
mongo_connnector.getFields(store_config, function(err, data){

        if (data) console.log(data);
        //the result is:
        //[
        //  { 
        //      field: {name: 'a', value: 18.11},
        //      store: {name: 'collection1', size: 4},
        //      source: { 
        //          name: 'test_mongo',
        //          type: 'mongo',
        //          user: '',
        //          passw: '',
        //          server: 'localhost',
        //          port: null,
        //          db: 'test_database'
        //      }
        //  },
        //  {
        //      field: {name: 'year', value: '2011'},
        //      store: {name: 'collection2', size: 4},
        //      source: { 
        //          name: 'test_mongo',
        //          type: 'mongo',
        //          user: '',
        //          passw: '',
        //          server: 'localhost',
        //          port: null,
        //          db: 'test_database'
        //      }
        //  }
     //]
});
</code></pre>

</div>
<a name="methods_getStoreNames"></a>
<div class="method item">
    Array <strong class="name"><code>getStoreNames</code></strong>( <code>source_config, callback </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/server_connectors_MongoConnector.js.html#l15"><code>server&#x2F;connectors&#x2F;MongoConnector.js:15</code></a>
    </span><br>
    <p>A public method that returns the
names of the stores (mongo collections)
that are present in the specified by
config file database.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>source_config</code> <strong>&lt;Json&gt;</strong>
        <p>Source (mongo database) configuration</p>

        </li>
        <li>
            <code>callback</code> <strong>&lt;Function&gt;</strong>
        <p>Callback function</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;Array&gt; <p>An array of stores (mongo collections) configuration</p>
</div>
        <h5>Example</h5>
        <pre class="code prettyprint"><code>var mongo_connector = require('../connectors/MongoConnector');

//the MongoDB database 'test_database' has the following collections:
//  - collection1
//  - collection2

//config file
var source_config = { 
    source: {
            name: 'test_mongo',
            type: 'mongo',
            user: '',
            passw: '',
            server: 'localhost',
            port: null,
            db: 'test_database'
    } 
};

//requesting the stores
mongo_connnector.getStoreNames(source_config, function(err, data){

        if (data) console.log(data);
        //the result is:
        //[ 
        //  { 
        //      store: {name: 'collection1'},
        //      source: { 
        //          name: 'test_mongo',
        //          type: 'mongo',
        //          user: '',
        //          passw: '',
        //          server: 'localhost',
        //          port: null,
        //          db: 'test_database'
        //      }
        //  },
        //  { 
        //      store: {name: 'collection2'},
        //      source: { 
        //          name: 'test_mongo',
        //          type: 'mongo',
        //          user: '',
        //          passw: '',
        //          server: 'localhost',
        //          port: null,
        //          db: 'test_database'
        //      }
        //  }
        //]
});
</code></pre>

</div>
<a name="methods_getStoreSize"></a>
<div class="method item">
    Array <strong class="name"><code>getStoreSize</code></strong>( <code>store_config, callback </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/server_connectors_MongoConnector.js.html#l143"><code>server&#x2F;connectors&#x2F;MongoConnector.js:143</code></a>
    </span><br>
    <p>A public method that adds a field 'size'
to the store (mongo collection) configuration
specified in <code>store_config</code>.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>store_config</code> <strong>&lt;Json&gt;</strong>
        <p>Store (mongo collection) configuration</p>

        </li>
        <li>
            <code>callback</code> <strong>&lt;Function&gt;</strong>
        <p>Callback function</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;Array&gt; <p>An array of stores (mongo collections) configuration with
additional 'size' field</p>
</div>
        <h5>Example</h5>
        <pre class="code prettyprint"><code>var mongo_connector = require('../connectors/MongoConnector');

//the MongoDB database 'test_database' has the following collections:
//  - collection1
//  - collection2

//config file
var store_config = {
    store: {name: 'collection1'},
    source: {
            name: 'test_mongo',
            type: 'mongo',
            user: '',
            passw: '',
            server: 'localhost',
            port: null,
            db: 'test_database'
    } 
};

//requesting the size
mongo_connnector.getStoreSize(store_config, function(err, data){

        if (data) console.log(data);
        //the result is:
        //{ 
        //  store: {name: 'collection1', size: 4},
        //  source: { 
        //      name: 'test_mongo',
        //      type: 'mongo',
        //      user: '',
        //      passw: '',
        //      server: 'localhost',
        //      port: null,
        //      db: 'test_database'
        //  }
        //}
});
</code></pre>

</div>
<a name="methods_isValidDatasetConfig"></a>
<div class="method item private">
    Boolean <strong class="name"><code>isValidDatasetConfig</code></strong>( <code>dataset_config </code> ) <em><code>&#x2F;* private method *&#x2F;</code></em>
    <br>
    <span class="foundat">
        
        <a href="../files/server_connectors_MongoConnector.js.html#l509"><code>server&#x2F;connectors&#x2F;MongoConnector.js:509</code></a>
    </span><br>
    <p>A private method that checks
the validity of store dataset
configuration</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>dataset_config</code> <strong>&lt;Json&gt;</strong>
        <p>Dataset configuration</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;Boolean&gt; <p>true if config is valid, false if not</p>
</div>
</div>
<a name="methods_isValidSourceConfig"></a>
<div class="method item private">
    Boolean <strong class="name"><code>isValidSourceConfig</code></strong>( <code>source_config </code> ) <em><code>&#x2F;* private method *&#x2F;</code></em>
    <br>
    <span class="foundat">
        
        <a href="../files/server_connectors_MongoConnector.js.html#l463"><code>server&#x2F;connectors&#x2F;MongoConnector.js:463</code></a>
    </span><br>
    <p>A private method that checks
the validity of source (mongo database)
configuration</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>source_config</code> <strong>&lt;Json&gt;</strong>
        <p>Source (mongo database) configuration</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;Boolean&gt; <p>true if config is valid, false if not</p>
</div>
</div>
<a name="methods_isValidStoreConfig"></a>
<div class="method item private">
    Boolean <strong class="name"><code>isValidStoreConfig</code></strong>( <code>store_config </code> ) <em><code>&#x2F;* private method *&#x2F;</code></em>
    <br>
    <span class="foundat">
        
        <a href="../files/server_connectors_MongoConnector.js.html#l486"><code>server&#x2F;connectors&#x2F;MongoConnector.js:486</code></a>
    </span><br>
    <p>A private method that checks
the validity of store (mongo collection)
configuration</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>store_config</code> <strong>&lt;Json&gt;</strong>
        <p>Store (mongo collection) configuration</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;Boolean&gt; <p>true if config is valid, false if not</p>
</div>
</div>
            </div>
    </div>
</div>
</div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/js/tabs.js"></script>
</body>
</html>
