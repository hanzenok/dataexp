<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>server/routes.js - dataexp</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.8.0pr2/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <script src="http://yui.yahooapis.com/combo?3.8.0pr2/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            <h1><a href="../index.html"><img src="../assets/css/logo.png" width="117" height="52">dataexp: server/routes.js</a></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.1</em>
        </div>
    </div>
    <div class="yui3-g">

        <div id="sidebar" class="yui3-u">
            <div id="modules" class="sidebox">
                <div class="hd">
                    <h2 class="no-toc">Modules</h2>
                </div>
                <div class="bd">
                    <ul>
                            <li><a href="../modules/server.html">server</a>
                                <ul>
                                        <li><a href="../modules/server.html#Connectors">Connectors</a></li>
                                        <li><a href="../modules/server.html#RestApi">RestApi</a></li>
                                </ul>
                            </li>
                    </ul>
                </div>
            </div>
            
            <div id="classes" class="sidebox">
                <div class="hd">
                    <h2 class="no-toc">Classes</h2>
                </div>
                <div class="bd">
                    <ul>
                            <li><a href="../classes/FileConnector.html">FileConnector</a></li>
                            <li><a href="../classes/GetSources.html">GetSources</a></li>
                            <li><a href="../classes/GetTimseries.html">GetTimseries</a></li>
                            <li><a href="../classes/MongoConnector.html">MongoConnector</a></li>
                            <li><a href="../classes/MysqlConnector.html">MysqlConnector</a></li>
                            <li><a href="../classes/routes.html">routes</a></li>
                    </ul>
                </div>
            </div>
            
            
            
            
            
            <div id="fileTree" class="sidebox">
                <div class="hd">
                    <h2 class="no-toc">Files</h2>
                </div>
                <div class="bd">
                    <ul><li>app/<ul><li>js/<ul><li><a href="../files/app_js_canvasjs.js.html">canvasjs.js</a></li><li>controllers/<ul><li><a href="../files/app_js_controllers_DialogCtrl.js.html">DialogCtrl.js</a></li><li><a href="../files/app_js_controllers_LeftNavCtrl.js.html">LeftNavCtrl.js</a></li></ul></li></ul></li></ul></li><li>server/<ul><li>connectors/<ul><li><a href="../files/server_connectors_FileConnector.js.html">FileConnector.js</a></li><li><a href="../files/server_connectors_MongoConnector.js.html">MongoConnector.js</a></li><li><a href="../files/server_connectors_MysqlConnector.js.html">MysqlConnector.js</a></li></ul></li><li>rest/<ul><li><a href="../files/server_rest_GetSources.js.html">GetSources.js</a></li><li><a href="../files/server_rest_GetTimeseries.js.html">GetTimeseries.js</a></li></ul></li><li><a href="../files/server_routes.js.html">routes.js</a></li></ul></li></ul>
                </div>
            </div>
            
        </div>

        <div id="main" class="yui3-u">
            <div class="content"><h4>server/routes.js</h4>

<pre class="code prettyprint linenums">
var getSources = require(&#x27;./rest/GetSources&#x27;);
var getStores = require(&#x27;./rest/GetStores&#x27;);
var getFields = require(&#x27;./rest/GetFields&#x27;);
var getTimeseries = require(&#x27;./rest/GetTimeseries&#x27;).getTimeseries;
var getStats = require(&#x27;./rest/GetTimeseries&#x27;).getStats;
var getConfig = require(&#x27;./rest/GetTimeseries&#x27;).getConfig;
var putSource = require(&#x27;./rest/PutSource&#x27;);
var deleteSource = require(&#x27;./rest/DeleteSource&#x27;);

/**
 * Rest API&#x27;s offered by server.
 * @module server
 * @submodule RestApi
 */

/**
 * A class (module) that defines all 
 * the API URLs, and the related methods.
 * &lt;br/&gt;
 * Here are some of the URLs: &lt;br/&gt;
 * - &lt;b&gt;/api/sources&lt;/b&gt;: GET a JSON with sources configuration
 * - &lt;b&gt;/api/sources&lt;/b&gt;: POST a new source, returns an empty array
 * - &lt;b&gt;/api/sources/:source_name&lt;/b&gt;: DELETE source, returns an empty array
 * - &lt;b&gt;/api/stores&lt;/b&gt;: POST a sources config, returns an array of stores
 * - &lt;b&gt;/api/fields&lt;/b&gt;: POST a stores config, returns an array of fields
 * - &lt;b&gt;/api/timeseries&lt;/b&gt;: POST a fields config, returns the realted dataset
 * - &lt;b&gt;/api/stats&lt;/b&gt;: GET statistics from tsproc
 * - &lt;b&gt;/api/config&lt;/b&gt;: GET configuration JSON of tsproc
 * @class routes
 */

module.exports = function(app){

	//main page
	app.get(&#x27;/&#x27;, function(req, res){

		res.sendFile(&#x27;app/index.html&#x27; , { root : __dirname});
	});

	//all REST APIs
	app.get(&#x27;/api/sources&#x27;, getSources);					//get the list of all the sources
	app.post(&#x27;/api/sources&#x27;, putSource);					//adding a source
	app.delete(&#x27;/api/sources/:source_name&#x27;, deleteSource);	//delete a specific source
	app.post(&#x27;/api/stores&#x27;, getStores);						//get the list of all the stores of a specific source
	app.post(&#x27;/api/fields&#x27;, getFields);						//get the list of all the fields of a specific store
	app.post(&#x27;/api/timeseries&#x27;, getTimeseries);				//get the dataset
	app.get(&#x27;/api/stats&#x27;, getStats);						//get some statistics
	app.get(&#x27;/api/config&#x27;, getConfig);						//get the config JSON

	//other pages
	app.use(function(req, res, next){
	
		res.setHeader(&#x27;Content-Type&#x27;, &#x27;text/plain&#x27;);
		res.status(404).send(&#x27;404 - File not found&#x27;)
	});

};

</pre>

</div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/js/tabs.js"></script>
</body>
</html>
